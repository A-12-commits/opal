# vim: filetype=ruby

# useful for inside header
require File.expand_path('../lib/opal/version', __FILE__)
require 'fileutils'
require 'yaml'

FileUtils.mkdir_p 'build'

header = <<-HEAD
/*!
 * opal v#{Opal::VERSION}
 * http://opalscript.org
 *
 * Copyright 2011, Adam Beynon
 * Released under the MIT license
 */
HEAD

Opal::Bundle.new do |s|
  # name - this defaults to dir name, so can be skipped
  s.name    = 'opal'

  # build mode to build tests to opal.test.js
  s.config :test do
    s.out     = 'opal.test.js'
    s.runtime = true
    s.files   = Dir['spec/**/*.rb']
  #  s.header  = header
    s.main    = 'spec/spec_helper.rb'

    s.gem 'opaltest', git: 'git://github.com/adambeynon/opaltest.git'
  end
end

